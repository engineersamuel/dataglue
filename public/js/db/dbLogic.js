// Generated by CoffeeScript 1.6.2
(function() {
  define(['underscore'], function(_) {
    var data, dbLogic, tmp;

    tmp = {};
    data = void 0;
    dbLogic = {};
    dbLogic.processDataSet = function(dataSet, dataSetData, callback) {
      var streams;

      if (dataSetData) {
        data = dataSetData;
      }
      console.log("dataSet: " + (JSON.stringify(dataSet)));
      console.log("dataSet length: " + dataSet.length);
      console.log("dataSetData: " + (JSON.stringify(dataSetData)));
      streams = [];
      return _.each(dataSetData, function(resultsHash) {
        _.each(resultsHash, function(theHash, dbRefKey) {
          return streams.push(theHash.d3Data);
        });
        return callback(null, streams);
      });
    };
    dbLogic.convertToD3 = function() {
      var tmpD3DataSet;

      tmpD3DataSet = [];
      return _.each(_.keys(tmp), function(dbReference) {
        var stack;

        stack = {
          key: tmp[dbReference]['field']['COLUMN_NAME'],
          values: []
        };
        _.each(_.keys(tmp[dbReference]['d3']), function(groupedKey) {
          return stack['values'].push({
            x: groupedKey,
            y: tmp[dbReference]['d3'][groupedKey]['count'],
            f: tmp[dbReference]['field']
          });
        });
        tmpD3DataSet.push(stack);
        return tmpD3DataSet;
      });
    };
    return dbLogic;
  });

}).call(this);

/*
//@ sourceMappingURL=dbLogic.map
*/
