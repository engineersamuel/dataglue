// Generated by CoffeeScript 1.6.2
(function() {
  var _;

  _ = require('lodash');

  exports.logger_config = {
    level: process.env.OPENSHIFT_DATA_DIR === void 0 ? 'debug' : 'info',
    format: "[{{timestamp}}] <{{title}}> <{{file}}:{{line}}> {{message}}",
    dateformat: "yyyy-mm-dd hh:MM:ss"
  };

  exports.resolveEnvVar = function(envVar) {
    if (envVar === void 0) {
      return void 0;
    }
    if (/^\$/i.test(envVar)) {
      return process.env[envVar.slice(1, envVar.length)];
    }
    return envVar;
  };

  exports.verifyPropertyExists = function(obj, field) {
    if ((_.has(obj, field)) && (obj[field] !== void 0) && (obj[field] !== '')) {
      return true;
    } else {
      return false;
    }
  };

  exports.generate_mongo_url = function(obj) {
    var mongourl;

    obj.host = exports.resolveEnvVar(obj.host) || '127.0.0.1';
    obj.port = exports.resolveEnvVar(obj.port) || 27017;
    obj.db = exports.resolveEnvVar(obj.db) || 'test';
    mongourl = void 0;
    if ((obj.user && obj.user !== '') && (obj.pass && obj.pass !== '')) {
      mongourl = "mongodb://" + (exports.resolveEnvVar(obj.user)) + ":" + (exports.resolveEnvVar(obj.pass)) + "@" + (exports.resolveEnvVar(obj.host) || '127.0.0.1') + ":" + (exports.resolveEnvVar(obj.port) || '27017') + "/" + (exports.resolveEnvVar(obj.db)) + "?auto_reconnect=true";
    } else {
      mongourl = "mongodb://" + (exports.resolveEnvVar(obj.host) || '127.0.0.1') + ":" + (exports.resolveEnvVar(obj.port) || '27017') + "/" + (exports.resolveEnvVar(obj.db) || 'dataglue') + "?auto_reconnect=true";
    }
    return mongourl;
  };

  exports.isInteger = function(f) {
    return f !== void 0 && typeof f === 'number' && Math.round(f) === f;
  };

  exports.isFloat = function(f) {
    return f !== void 0 && typeof f === 'number' && !exports.isInteger(f);
  };

  exports.setMongoFieldDataType = function(obj) {
    if (_.isDate(obj)) {
      return 'datetime';
    } else if (_.isBoolean(obj)) {
      return 'boolean';
    } else if (_.isArray(obj)) {
      return 'array';
    } else if (_.isObject(obj)) {
      return 'object';
    } else if (_.isString(obj)) {
      return 'varchar';
    } else if (exports.isInteger(obj)) {
      return 'int';
    } else if (exports.isFloat(obj)) {
      return 'float';
    }
  };

  exports.stringify = function(obj) {
    if (_.isString(obj)) {
      return obj;
    } else if (_.isObject(obj)) {
      return JSON.stringify(obj);
    }
    return obj;
  };

}).call(this);

/*
//@ sourceMappingURL=utils.map
*/
